<!DOCTYPE html>
<html lang="en">
<html>
    <head>
      <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinkerlab.</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;1,200&display=swap" rel="stylesheet">
    <link href="https://rsms.me/inter/inter.css" rel="stylesheet">
    <link rel="stylesheet" href="css-main/cssmainwebsite.css">
    <link rel="stylesheet" href="css-main/CT_LT-Main.css">
    <link rel="stylesheet" href="css-main/CT-Reservation-details.css">
    <script src="../js-main/search.js"></script>
    <link rel="icon" href="images/icon.png">

           <script>
    // JavaScript for submitting form data
    function collectAndSendData() {
        const fullName = "{{user.fullName}}"; // Assuming user.fullName is a variable accessible here
        const isAnonymous = document.getElementById('anonymousCheckbox').checked ? 1 : 0;
        const isAnonyname = isAnonymous ? "Yes" : "No";

const nameInput = document.getElementById('nameInput').value; // Fetching the value from the input field
         const seatNamesString = "{{ reservationData.seatNames }}"; // Assuming this is a comma-separated string
    const seatNamesArray = seatNamesString.split(',').map(seat => seat.trim());

        const data = {
            fullName: fullName,
            reserverName: nameInput, //DITO IBIBIGAY YTUNG IINPUT SA TEXTBOX
            anonymous: isAnonymous,
            anonyname: isAnonyname,
            dblab: "{{ reservationData.dblab }}", // Assuming this value is static or from another source
            lab: "{{ reservationData.lab }}", 
            seatNames: seatNamesArray, 
            dateofrequest: "{{ reservationData.dateofrequest }}", 
            timeofrequest: "{{ reservationData.timeofrequest }}", 
            dateofreservation: "{{ reservationData.dateofreservation }}", 
            timeofreservation: "{{ reservationData.timeofreservation }}" 
        };

        fetch('/LaddReservation', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => {
            if (response.ok) {
                window.location.href = '/LaddReservation'; // Redirect to confirmation page
            } else {
                console.error('Failed to send data');
            }
        })
        .catch(error => console.error('Error:', error));
    }
    </script>
    </head>
    <body>
  <header class="header">
        <img class="imglogo" src="images/tinkerlablogo.png" alt="TinkerLab Logo">
    </header>
    <nav class="taskbar">
        <div class="btndivider">
            <a href="/CT-homepage">
                <button class="btndesign" id="homebtn">Home</button>
            </a>
        </div>
        <div class="btndivider">
            <a href="/Andrew">
                <button class="btndesign" id="reservationbtn">Reservation</button>
            </a>
        </div>
        <div class="btndivider">
            <a href="/CT-View-Edit">
                <button class="btndesign" id="vieweditbtn">View/Edit</button>
            </a>
        </div>
        <div class="btndivider">
            <a href="/CT-Profile">
                <button class="btndesign" id="profilebtn">Profile</button>
            </a>
        </div>
        <form id="searchForm" action="/search" method="GET" autocomplete="off">
            <div class="searchdivider">
                <div class="searchfield">
                    <input class="searchinput" type="text" name="name" placeholder="Search..." required>
                    <button class="searchbutton" type="submit">
                        <img src="images/searchglass.png" class="imgbtn" alt="Search">
                    </button>
                </div>
                <div class="suggestions-div">
                    <div class="suggestion-card">
                        <!--  a href cards of users will be inserted here -->
                    </div>
                </div>
            </div>
        </form>
    </nav>
    <main>
        <div class="title-1">RESERVATION DETAILS</div>
        <div class="outer-box">
            <ul class="details">
                <li><span class="bold">ReserverName:</span><input id="nameInput" type="text" ></input></li> 
                <li><span class="bold">ReservedBy:</span> {{user.fullName}} </li>
                <li><input type="checkbox" id="anonymousCheckbox"> <span>Anonymous</span></li>
                <li><span class="bold">Computer Lab:</span> {{ reservationData.lab }}</li>
                <li><span class="bold">Seat No.:</span> {{ reservationData.seatNames }}</li>
                <li><span class="bold">Date of Request:</span> {{ reservationData.dateofrequest }}</li>
                <li><span class="bold">Time of Request:</span> {{ reservationData.timeofrequest }}</li>
                <li><span class="bold">Date of Reservation:</span> {{ reservationData.dateofreservation }}</li>
                <li><span class="bold">Time of Reservation:</span> {{ reservationData.timeofreservation }}</li>
            </ul> 
        </div>
        <div class="button-container">
            <button class="back-button" onclick="history.back()">Back</button>
            <button class="purple-button" onclick="showPrompt()">Submit</button>
        </div>
    </main>
    <script src="js/prompt.js"></script>
    <div id="dialog-1" class="dialog-1">
        <div class="dialog-header"></div>
        <p class="prompt-text">DO YOU CONFIRM TO <br>RESERVE<span class="green-text"> {{ reservationData.seatNames }} </span> SEAT?</p>
        <div class="button-container">
            <button class="back-button" onclick="hidePrompt()">Back</button>
            <button class="purple-button" onclick="collectAndSendData()">Confirm</button>
        </div>
    </div>
    <footer>
        <div class="footer-container">
            <div class="footer-column-1">
                <img class="footer-logo" src="images/tinkerlablogo.png" alt="TinkerLab Logo">
                <p><span class="tagline">Reserve in a Blink, then Explore and Think!</span></p>
            </div>
            <div class="footer-column-2">
                <h3>About</h3>
                <p class="footer-about">an intuitive platform that allows students to easily<br> 
                    reserve, check availability, and manage their computer<br> 
                    lab seats, ensuring hassle-free access for projects,<br>studying, and creative work.</p>
            </div>
            <div class="footer-column-3">
                <h3>Contact</h3>
                <div class="contact-info">
                    <img class="email-logo" src="images/email-logo.png" alt="Email Logo">
                    <a class="dlsu-email" href="mailto:charlemagne_craw@dlsu.edu.ph">charlemagne_craw@dlsu.edu.ph</a>
                </div>
                <div class="contact-info">
                    <img class="email-logo" src="images/email-logo.png" alt="Email Logo">
                    <a class="dlsu-email" href="mailto:rafael_debelen@dlsu.edu.ph">rafael_debelen@dlsu.edu.ph</a>
                </div>
                <div class="contact-info">
                    <img class="email-logo" src="images/email-logo.png" alt="Email Logo">
                    <a class="dlsu-email" href="mailto:monica_santiago@dlsu.edu.ph">monica_santiago@dlsu.edu.ph</a>
                </div>
                <div class="contact-info">
                    <img class="email-logo" src="images/email-logo.png" alt="Email Logo">
                    <a class="dlsu-email" href="mailto:john_fredrick_tario@dlsu.edu.ph">john_fredrick_tario@dlsu.edu.ph</a>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
